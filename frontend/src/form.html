<form
  id="donation-form"
  onsubmit="return handleFormSubmit();"
  style="display: none"
>
  <h2 class="text-lg">I would like to give</h2>

  <div class="radio-group flex gap-2 mb-4">
    <input
      type="radio"
      id="one-time"
      name="recurring_frequency"
      value="one-time"
      checked
    />
    <label for="one-time" class="rounded-sm text-blue"> One-time </label>
    <input
      type="radio"
      id="monthly"
      name="recurring_frequency"
      value="monthly"
    />
    <label for="monthly" class="rounded-sm text-blue"> Monthly </label>
  </div>

  <h2 class="text-lg mt-8">I would like my gift to go to</h2>
  <div class="radio-group flex gap-2 mb-4">
    <input
      type="radio"
      id="default-allocation"
      name="allocation-type"
      value="default"
      checked
      onclick="hide('custom-allocation-section'); showBlock('default-allocation-section');"
    />
    <label for="default-allocation" class="rounded-sm text-blue">
      The most effective charities, based on evidence and need
    </label>

    <input
      type="radio"
      id="custom-allocation"
      name="allocation-type"
      value="custom"
      onclick="hide('default-allocation-section'); showBlock('custom-allocation-section');"
    />
    <label for="custom-allocation" class="rounded-sm text-blue">
      These specific charities
    </label>
  </div>
  <div id="default-allocation-section">
    <h2 class="text-lg mt-8">I would like to gift</h2>
    <div id="custom-amount" class="rounded-sm text-blue mb-2">
      <input
        type="radio"
        id="custom-amount-checkbox"
        name="donation-amount"
        value="custom"
        onchange="this.checked ? $('custom-amount-input').focus() : null;"
      />
      <label class="inline-block" for="custom-amount-checkbox"> Amount </label>
      <input
        type="number"
        inputmode="numeric"
        min="2"
        max="999999.99"
        step="1"
        id="custom-amount-input"
        name="custom-amount-input"
        class="inline-block rounded-sm text-md"
        onblur="this.value === '' || this.value.toString().startsWith(0) ? this.value = 0 : this.value = this.value;"
        onfocus="$('custom-amount-checkbox').checked = true; $('custom-amount').classList.add('selected', 'validate');"
        tabindex="-1"
      />
    </div>
    <div class="radio-group flex gap-2 mb-2">
      <input
        type="radio"
        id="donate-25"
        name="donation-amount"
        value="25"
        checked
        onchange="$('custom-amount').classList.remove('selected','validate');"
      />
      <label for="donate-25" class="rounded-sm text-blue">$25</label>
      <input
        type="radio"
        id="donate-50"
        name="donation-amount"
        value="50"
        onchange="$('custom-amount').classList.remove('selected','validate');"
      />
      <label for="donate-50" class="rounded-sm text-blue">$50</label>
      <input
        type="radio"
        id="donate-100"
        name="donation-amount"
        value="100"
        onchange="$('custom-amount').classList.remove('selected','validate');"
      />
      <label for="donate-100" class="rounded-sm text-blue">$100</label>
      <input
        type="radio"
        id="donate-250"
        name="donation-amount"
        value="250"
        onchange="$('custom-amount').classList.remove('selected','validate');"
      />
      <label for="donate-250" class="rounded-sm text-blue">$250</label>
    </div>
  </div>

  <div id="custom-allocation-section" style="display: none">
    Fetching charity details...
    <div>Total $</div>
  </div>

  <h2 class="text-lg mt-8">Personal Details</h2>
  <div class="flex flex-col gap-2 mb-4 validate">
    <div>
      <label for="first-name"> First name </label>
      <input
        type="text"
        id="first-name"
        name="first_name"
        class="block w-full p-2 text-md border rounded-sm focus-outline"
        required
      />
    </div>

    <div>
      <label for="last-name"> Last name </label>
      <input
        type="text"
        id="last-name"
        name="last_name"
        class="block w-full p-2 text-md border rounded-sm focus-outline"
        required
      />
    </div>

    <div>
      <label for="email"> Email </label>
      <input
        type="email"
        id="email"
        name="email"
        class="block w-full p-2 text-md border rounded-sm focus-outline"
        required
      />
    </div>

    <div>
      <label for="postcode"> Postcode </label>
      <input
        id="postcode"
        type="number"
        inputmode="numeric"
        step="1"
        name="postcode"
        class="block w-full p-2 text-md border rounded-sm focus-outline"
        required
      />
    </div>

    <div>
      <label for="country"> Country </label>
      <input
        type="text"
        id="country"
        name="country"
        class="block w-full p-2 text-md border rounded-sm focus-outline"
        value="Australia"
        required
      />
    </div>
  </div>

  <div class="flex flex-col">
    <h2 class="inline-block text-lg mt-8">How did you hear about us?</h2>
    <select
      name="how_did_you_hear_about_us_db"
      id="referral-sources"
      class="eaa-select text-md flex flex-grow mb-4 rounded-md border h-12 border-none p-2 focus-outline"
    ></select>
  </div>

  <div class="flex flex-col items-start">
    <label class="eaa-checkbox">
      <input
        type="checkbox"
        id="subscribe-to-updates"
        name="subscribe_to_updates"
      />
      Send me news and updates
      <div class="checkmark rounded-sm"></div>
    </label>

    <label class="eaa-checkbox">
      <input
        type="checkbox"
        id="subscribe-to-newsletter"
        name="subscribe_to_newsletter"
      />
      Subscribe me to the global Effective Altruism newsletter
      <div class="checkmark rounded-sm"></div>
    </label>

    <label class="eaa-checkbox">
      <input
        type="checkbox"
        id="connect-to-community"
        name="connect_to_community"
      />
      Connect me with my local Effective Altruism community
      <div class="checkmark rounded-sm"></div>
    </label>
  </div>

  <h2 class="text-lg mt-8">Payment Method</h2>

  <div class="radio-group flex gap-2 mb-4">
    <input
      type="radio"
      id="credit-card"
      name="payment_method"
      value="credit-card"
      onclick="hide('bank-details-section')"
      checked
    />
    <label for="credit-card" class="rounded-sm text-blue">Credit Card</label>

    <input
      type="radio"
      id="bank-transfer"
      name="payment_method"
      value="bank-transfer"
      onclick="showBlock('bank-details-section')"
    />
    <label for="bank-transfer" class="rounded-sm text-blue"
      >Bank Transfer</label
    >
  </div>

  <div id="bank-details-section">
    <div class="mb-4">
      After you submit this form, we will give you our account details and a
      unique reference number. You can then log in to your bank and make a bank
      transfer using these details.
    </div>
  </div>

  <div class="flex flex-col items-start">
    <h2 class="text-lg mt-8">
      Are you making this donation as a gift to someone?
    </h2>
    <label class="eaa-checkbox" for="gift">
      <input
        type="checkbox"
        id="gift"
        name="is_gift"
        onclick="this.checked ? showGiftSection() : hideGiftSection();"
      />
      Yes, this is a gift.
      <div class="checkmark rounded-sm"></div>
    </label>

    <fieldset
      id="gift-section"
      class="flex flex-col gap-2 self-stretch mb-4 validate"
      disabled
    >
      <div>
        <label for="recipient-name"> Recipient Name </label>
        <input
          type="text"
          id="recipient-name"
          name="gift_recipient_name"
          class="block w-full p-2 text-md border rounded-sm focus-outline"
        />
      </div>

      <div>
        <label for="recipient-email"> Recipient Email </label>
        <input
          type="email"
          id="recipient-email"
          name="gift_recipient_email"
          class="block w-full p-2 text-md border rounded-sm focus-outline"
          required
        />
      </div>

      <div>
        <label for="gift-message">
          Include a personal message to be sent to the recipient (optional)
        </label>
        <textarea
          id="gift-message"
          name="gift_personal_message"
          class="block w-full h-20 p-2 text-md block p-2 border rounded-sm focus-outline"
        ></textarea>
      </div>
    </fieldset>
  </div>

  <button
    id="donate-button"
    class="mt-4 py-5 px-10 text-white text-md border-none rounded-sm focus-outline"
    type="submit"
    value="Donate"
  >
    Donate
  </button>
</form>

<div id="thank-you-message" style="display: none">
  <h2>Thank you!</h2>
  <p>Your receipt will be sent to your email address.</p>

  <h3>Any questions?</h3>

  <p>
    Please email us at <a href="mailto:info@eaa.org.au">info@eaa.org.au</a> or
    call us on +61 492 841 596, if you have any questions.
  </p>

  <p>Best wishes and thanks,</p>
  <p>The team at Effective Altruism Australia</p>
</div>
